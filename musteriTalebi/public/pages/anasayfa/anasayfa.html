<!DOCTYPE html>
<html lang="en">
  <style>
    body {
    font-family: Arial, sans-serif;
    background-color: #f4f4f9;
    margin: 0;
    padding: 20px;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    height: 100vh;
}
.sidebar {
    height: 100%;
    width: 250px; /* Sidebar genişliği */
    position: fixed;
    top: 0;
    left: -250px; /* Başlangıçta gizli, sol kenardan 250px uzaklıkta */
    background-color: #111; /* Koyu arka plan */
    overflow-x: hidden; /* Yatay kaydırma çubuğunu gizle */
    transition: 0.5s; /* Animasyon */
    padding-top: 60px; /* Başlık için üst boşluk */
    z-index: 9999; /* En üstte görünmesini sağla */
  }
  
  .sidebar-header {
    color: #fff;
    text-align: center;
    font-size: 30px;
    padding: 15px;
    background-color: #333; /* Koyu başlık arka planı */
  }
  
  .sidebar-list {
    list-style-type: none;
    padding: 0;
    margin: 0;
  }
  
  .sidebar-list li {
    padding: 8px 16px;
    text-align: left;
  }
  
  .sidebar-list li a {
    color: white;
    text-decoration: none;
    font-size: 18px;
    display: block;
    transition: 0.3s; /* Link hover animasyonu */
  }
  
  .sidebar-list li a:hover {
    background-color: #575757; /* Hover efekti */
  }
  
  /* Kapama butonu */
  .close-btn {
    color: white;
    font-size: 36px;
    position: absolute;
    top: 15px;
    right: 25px;
    cursor: pointer;
  }
  
  /* Sidebar açık olduğunda görünmesi */
  .sidebar.open {
    left: 0; /* Sidebar, sol kenara 0 px mesafede olacak */
  }
  
  /* Sidebar açma butonu */
  .open-btn {
    font-size: 30px;
    background-color: #111;
    color: white;
    padding: 10px 20px;
    border: none;
    cursor: pointer;
    position: fixed;
    top: 20px;
    left: 20px;
    z-index: 9998; /* Sidebar'dan bir alt katmanda */
  }
  
  .open-btn:hover {
    background-color: #333; /* Hover efekti */
  }
  .left{
    height: 100%;
    width: 1%;
  }
  .right{
    /* background-color: blue; */
    width: 50%;
    display: flex;
    justify-content: flex-start;
    flex-direction: column;
    align-items: center;
    height: 100%;
  }
  .header{
    display: flex;
    justify-content: center;
    align-items: center;
    height: 10%;
  }
  </style>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ana Sayfa</title>
</head>
<body>
 <div class="left">
        <div id="sidebar" class="sidebar">
          <div class="sidebar-header">
            <span style="font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;">Eron Yazılım</span>
            <span style="font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;">Talep Kayıtları</span>
            <span id="close-btn" class="close-btn">&times;</span>
          </div>
          <ul class="sidebar-list">
            <li style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;"><a href="/pages/anasayfa/anasayfa.html">Ana Sayfa</a></li>
            <li style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;"><a href="/pages/kayitOlustur/kayitOlustur.html">Talep Kaydı Oluştur</a></li>
            <li style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;"><a href="/pages/kayitListesi/kayitListesi.html">Talep Kayıtları</a></li>
          </ul>
        </div>
        
        <!-- Sidebar Toggle Button -->
        <button id="open-btn" class="open-btn">☰ Menü</button>
      </div>

  <div class="right">
    <canvas id="grafik" width="400" height="200"></canvas>
  </div>
</body>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    fetch('/kayitlar')
  .then(res => res.json())
  .then(data => {
    const basliklar = {};
    data.forEach(item => {
      if (basliklar[item.e_talep_basligi]) {
        basliklar[item.e_talep_basligi]++;
      } else {
        basliklar[item.e_talep_basligi] = 1;
      }
    });

    const labels = Object.keys(basliklar);
    const values = Object.values(basliklar);

    const ctx = document.getElementById('grafik').getContext('2d');
    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: labels,
        datasets: [{
          label: 'Talep Başlığına Göre Kayıt Sayısı',
          data: values,
          backgroundColor: '#58A6FF'
        }]
      }
    });
  });

</script>
<script>
    // Açma ve kapama butonlarına işlevsellik ekleyelim
  const sidebar = document.getElementById('sidebar');
const openBtn = document.getElementById('open-btn');
const closeBtn = document.getElementById('close-btn');

// Sidebar'ı açmak için
openBtn.addEventListener('click', () => {
  sidebar.classList.add('open');
});

// Sidebar'ı kapatmak için
closeBtn.addEventListener('click', () => {
  sidebar.classList.remove('open');
});
</script>
</html>